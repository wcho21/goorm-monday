# PROOF

길이가 $n$으로 같은 두 수열 $a_1, \dots, a_n$와 $b_1, \dots, b_n$이 오름차순으로 있다고 하자.
즉 $a_1 < \dots < a_n$이고, $b_1, < \dots < b_n$이다.

각 수열에서 하나씩 골라 $n$개의 짝을 짓자. (예를 들어 $a_1$는 $b_1$와 짝을 짓고, $a_2$는 $b_2$와 하고 이런 식이다.)
그리고 그 짝이 이루는 차의 절대값을 전부 더한다.
(예를 들어 같은 인덱스끼리 짝을 지었을 때, $|a_1 - b_1| + \dots + |a_n - b_n|$.)

이 합이 최소가 되는 때는 같은 인덱스끼리, 즉 $a_i$와 $b_i$끼리 짝을 이루었을 때이다.
두 수열이 오름차순으로 정렬되어있기 때문에, 같은 순서끼리 짝을 지은 경우를 말한다.
즉 다음이 최소 합이다.

$$
  |a_1 - b_1| + |a_2 - b_2| + \dots + |a_n - b_n|
$$


## 베이스 케이스: 수열의 길이가 2인 경우

네 개의 숫자 $a_1, a_2, b_1, b_2$이 $a_1 < a_2$와 $b_1 < b_2$로 주어졌다고 하자.

그러면 짝을 이루는 경우는 두 가지 뿐이므로, 차의 절대값을 합한 것도 두 개 뿐이다.
이를 각각 $S_1, S_2$라고 하자.

$$
\begin{gathered}
  S_1 = |a_1 - b_1| + |a_2 - b_2| \\
  S_2 = |a_1 - b_2| + |a_2 - b_1|
\end{gathered}
$$

증명하고자 하는 것은 정렬한 대로 짝을 지었을 때가 더 작다는 것, 즉 $S_1 \leq S_2$ 이다.
다시 말해 $S_2 - S_1 \geq 0$ 이므로, 아래와 같다.

$$
  S_2 - S_1 = |a_1 - b_2| + |a_2 - b_1| - |a_1 - b_1| - |a_2 - b_2| \geq 0
$$

한편 $b_2$가 $a_1, a_2$와 이루는 상대적인 위치에 따라 세 가지 경우로 나누자.

- $b_2 \leq a_1$
- $a_1 < b_2 \leq a_2$
- $a_2 < b_2$

첫 번째 경우, 위 $S_2 - S_1$의 계산식에서 절대값 기호는 그대로 사라진다.
따라서 $S_2 - S_1 = 0 \geq 0$이므로 이 경우는 쉽게 증명된다.

두 번째 경우, 즉 $a_1 < b_2 \leq a_2$ 일 때, 다음과 같이 증명된다.
중간에 [삼각부등식][tri-ineq], 즉 $|a+b| \leq |a| + |b|$를 사용한다.

[tri-ineq]: https://en.wikipedia.org/wiki/Triangle_inequality

$$
\begin{alignat}{1}
  S_2 - S_1 &= (b_2 - a_1) + (b_2 - b_1) - |a_1 - b_1| \\
    &= (b_2 - a_1) + (b_2 - b_1) - |a_1 - b_2 + b_2 - b_1| \\
    &\geq (b_2 - a_1) + (b_2 - b_1) - (|a_1 - b_2| + |b_2 - b_1|) \\
    &= 0
\end{alignat}
$$

마지막으로 세 번째 경우, 즉 $a_2 < b_2$ 일 때에도 0이다.
여기서도 삼각부등식을 이용한다.

$$
\begin{alignat}{1}
  S_2 - S_1 &= |a_2 - b_1| - (|a_2 - a_1| + |a_1 - b_1|) \\
    &\geq |a_2 - b_1| - |a_2 - b_1| \\
    &= 0
\end{alignat}
$$

위 세 가지 경우를 통해 $S_1 \leq S_2$, 즉 $S_1$이 최소임을 보였다.



## 길이가 3 이상인 경우

길이가 $k-1$ 이하인 경우 증명되었다고 하고, 길이가 $k$ 인 경우를 증명할 것이다.
그러면 모든 길이의 수열에 대해 [귀납적][induction]으로 증명이 끝난다.

[induction]: https://en.wikipedia.org/wiki/Mathematical_induction

수열 $a_1, \dots, a_k$와 $b_1, \dots, b_k$이 오름차순으로 정렬되어 있다고 하자.

이제 $a_1$이 짝을 이루는 숫자를 기준으로 세 가지 경우로 나눈다.

- $b_1$와 짝을 이루는 경우
- $b_2, \dots, b_{k-1}$ 중에 하나와 짝을 이루는 경우
- $b_k$와 짝을 이루는 경우

### 첫 번째 경우

$a_1$가 $b_1$와 짝을 이룬 경우이다.
그러므로 나머지 $k-1$ 개의 부분이 남았다.
그런데 $k-1$ 개 이하인 경우, 가정에 의해 정렬된 순서 끼리 짝을 이룬 경우가 최소이다.
즉 $|a_2 - b_2| + \dots + |a_k - b_k|$가 최소이다.

따라서 이 경우는 아래와 같은 합이 최소이다.

$$
  |a_1 - b_1| + |a_2 - b_2| + \dots + |a_k - b_k|
$$

이제 나머지 두 경우, 이보다 작을 수 없다는 것을 보일 것이다.
그러면 위 합이 최소가 되며 증명이 끝난다.

### 두 번째 경우

$a_1$가 $b_l$이 짝을 이룬 경우이다 ($2 \leq l \leq k-1$).
그러면 짝이 이루는 차이의 합은 이렇다.

$$
  \underbrace{
    |a_1 - b_l| + (
      |a_2 - b_1| + |a_3 - b_2| + \dots + |a_l - b_{l-1}|
    )
  }\_{\textbf{\large A}} +
  (
    \underbrace{
      |a_{l+1} - b_{l+1}| + |a_{l+2} - b_{l+2}| + \dots + |a_k - b_k|
    }\_{\textbf{\large B}}
  )
$$

여기서 뒷 부분 $\textbf{B}$는 $k-l$개의 짝으로 이룬 합이다.
길이가 $k-1$ 이하이고, 정렬된 순으로 짝이 지어졌으므로, 가정에 의해 이 길이로 만들 수 있는 최소의 합이다.

그런데 앞 부분 $\textbf{A}$, 즉 $l$개의 짝으로 이룬 합은 최소임이 보장되지 않는다.
길이가 $l < k-1$ 이므로, 가정에 의해 알 수 있다.
따라서 이 경우의 합은 첫 번째 경우보다 더 작을 수 없다.

### 세 번째 경우

$a_1$가 $b_k$와 짝을 이룬 경우이다.
그러면 숫자가 $k-1$ 개씩, 즉 $a_2, \dots, a_k$와 $b_1, \dots, b_{k-1}$가 남는다.

이 남은 숫자로 만들 수 있는 합은 가정에 의해 $|a_2 - b_1| + \dots + |a_k - b_{k-1}|$가 최소이다.
이는 다음 그림 처럼 짝을 지은 경우이다.

```
a: 1  2  3  ...  k-1  k
   |  |  |        |   |
b: k  1  2  ...  k-2 k-1
```

즉 다음 합이 최소이다.
(이를 $T$ 라고 하자.)

$$
  T = |a_1 - b_k| + |a_2 - b_1| + |a_3 - b_2| + \dots + |a_k - b_{k-1}|
$$


한편, 이렇게 짝을 지은 경우를 생각해보자.
$a_1$는 $b_1$와 짝을 이루고, $a_2$는 $b_k$와 이룬 다음, 나머지 $a_i$가 $b_{i-1}$와 이룬 경우이다.

```
a: 1  2  3  ...  k-1  k
   |  |  |        |   |
b: 1  k  2  ...  k-2 k-1
```

이 경우의 합은 이렇다. (이것을 $U$ 라고 하자.)

$$
  U = |a_1 - b_1| + |a_2 - b_k| + |a_3 - b_2| + \dots + |a_k - b_{k-1}|
$$

이 합 $U$는 첫 번째 경우의 합보다 작을 수 없다.
왜냐면 $a_2, \dots, a_k$와 $b_2, \dots, b_k$가 이루는 합은, 가정에 의해 $|a_2 - b_2| + \dots + |a_k - b_k|$가 최소이기 때문이다.

그런데 합 $T$가 합 $U$보다 작을 수 없다면, 당연히 합 $T$ 또한 첫 번째 경우보다 작을 수 없다는 것도 보인 것이다.

이를 이용해, 합 $T$가 합 $U$보다 작을 수 없다는 것을 보이며 증명을 끝낼 것이다.
다시 말해 $T - U \geq 0$를 보일 것이다.

$$
  T - U =
    \underbrace{|a_1 - b_k| + |a_2 - b_1|}\_{\textbf{\large A}} -
    \underbrace{|a_1 - b_1| - |a_2 - b_k|}\_{\textbf{\large B}}
$$

그런데 관찰해보면, 이것은 베이스 케이스에서 인덱스 $2$를 $k$로 바꾼 경우와 똑같다.
즉 뒷 부분 $\textbf{B}$가 앞 부분 $\textbf{A}$ 이하임을 똑같은 방법으로 보일 수 있다.
따라서 $T - U \geq 0$이다.
이로써 증명이 끝났다.
